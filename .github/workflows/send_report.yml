name: Send Telegram Stock Report

on:
  schedule:
    - cron: '30 23 * * *' # UTC 기준 → 한국 시간 08:30
  workflow_dispatch: # 수동 실행도 가능

jobs:
  send:
    runs-on: ubuntu-latest

    env:
      TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

    steps:
      - name: Send Telegram Stock Report
        run: |
          MESSAGE="📈 [단타용 국내 주식 리포트]\n\n"
          MESSAGE+="✅ 주요 테마: 2차전지, 반도체, 로봇\n"
          MESSAGE+="✅ 뉴스 이슈: 美 CPI 발표 예정, 정책 수혜 기대\n"
          MESSAGE+="✅ 감지 종목: 삼성전자, 에코프로, 레인보우로보틱스\n\n"
          MESSAGE+="🔁 매일 오전 8시 30분 자동 발송됩니다."

          curl -s -X POST https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage \
            -d chat_id=${TELEGRAM_CHAT_ID} \
            -d text="$MESSAGE"
