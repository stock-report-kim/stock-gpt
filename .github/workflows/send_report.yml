name: Send Telegram Stock Report

on:
  schedule:
    - cron: '30 23 * * *' # UTC ê¸°ì¤€ â†’ í•œêµ­ ì‹œê°„ 08:30
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥

jobs:
  send:
    runs-on: ubuntu-latest

    env:
      TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

    steps:
      - name: Send Telegram Stock Report
        run: |
          MESSAGE="ğŸ“ˆ [ë‹¨íƒ€ìš© êµ­ë‚´ ì£¼ì‹ ë¦¬í¬íŠ¸]\n\n"
          MESSAGE+="âœ… ì£¼ìš” í…Œë§ˆ: 2ì°¨ì „ì§€, ë°˜ë„ì²´, ë¡œë´‡\n"
          MESSAGE+="âœ… ë‰´ìŠ¤ ì´ìŠˆ: ç¾ CPI ë°œí‘œ ì˜ˆì •, ì •ì±… ìˆ˜í˜œ ê¸°ëŒ€\n"
          MESSAGE+="âœ… ê°ì§€ ì¢…ëª©: ì‚¼ì„±ì „ì, ì—ì½”í”„ë¡œ, ë ˆì¸ë³´ìš°ë¡œë³´í‹±ìŠ¤\n\n"
          MESSAGE+="ğŸ” ë§¤ì¼ ì˜¤ì „ 8ì‹œ 30ë¶„ ìë™ ë°œì†¡ë©ë‹ˆë‹¤."

          curl -s -X POST https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage \
            -d chat_id=${TELEGRAM_CHAT_ID} \
            -d text="$MESSAGE"
